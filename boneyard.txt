How to Search the Catalog
=========================

From the |title| home page, click on ``Explore Data Layers`` to navigate to the catalog.

Within the catalog, you will find a listing of all the data layers accessible through the |title|. By default, the data layers are shown in alphabetical order. There are several ways the data layers can be browsed or searched.

* Click a category tag in the left sidebar. The data layers that are associated with the tag will be displayed. More than one category tag can be selected at the same time.

* Enter a search term. Just type the data you are interested in finding into the search box in the upper left toolbar. As you type, you may see matching terms (e.g. ``Hints``) and actual data layers (e.g. ``Results``) appear below the toolbar's search box. Click on the ``Hints`` or ``Results`` of interest and the search results will appear in the data catalog.

* Filter the result types in the left sidebar. All data layers in the catalog are categorized as ``Map layers`` (e.g. static GIS layers), ``Projects`` (e.g. research project data files displayed from the Research Workspace), or ``Sensor stations`` (e.g. real-time sensor observations). Select the checkboxes to display or narrow the data layers by these ``Results`` types.

* Do an advanced search by space, time, or method. Click on ``Advanced search options`` in the left sidebar.

	* Using the ``Spatial filter`` option, you can click on the rectangle icon to draw a bounding box on the map, or you can type the latitude/longitude coordinates. The data layers occuring in that spatial area will appear in the data catalog.

	* Using the ``Filter time`` option, you can adjust the time slider or type the start/end date range. The data layers occuring during that temporal period will appear in the data catalog.

	* Using the ``Access method`` option, you can select data service method from which data layers can be downloaded from the catalog.

How to use OpenDAP
==================
#. Select ``THREDDS OPeNDAP`` under the ``Download`` button to start the service.
#. Your browser should get a response from the server almost instantaneously.
#. The response page will have a list of available variables â€” check the variables you want to download.
#. If you want, subset each variable by indices. The numbers are minimum:stride:maximum (the default  stride is 1, which downloads all time slices; a stride of 2 will download every second time slice, etc.). Add lat/lon variables if needed in your output, but in most cases this is unnecessary.
#. Scroll back up to the top of the page and select Get ASCII or Get Binary. ASCII is the most popular from this interface.

How to access an example gridded dataset via the AOOS ERDAP:
============================================================

#. Go to http://erddap.aoos.org
#. From the right-hand bar, search for Datasets by Protocol, select "griddap datasets" to see available layers
#. Select one of the available links under Grid DAP Data
#. Select the range in each dimension (e.g., start time, stride, end time), and uncheck all unneeded variables.
#. Select the output file type desired and submit the request to the server. When the data is bundled, it will download automatically.

How to downlaod a virtual sensor
================================

The portal provides access to time-series extraction of gridded data, also known as a "Virtual Sensor."

#. Click on an area of interest in the map.
#. A symbol at the location will appear, and a window will launch requesting all the data at that latitude and longitude throughout the dataset.
#. Select ``Download`` to receive a zip file containing data.csv and metadata.txt for that station and sensor.

How to download Historical Sensor Data
======================================

Real-time stations and their associated pages aggregate and show all relevant station data. Data can be downloaded by selecting an individual station and then choosing ``Download``.

#. Within the portal, visit the real-time sensor map.
#. Use the station filters to show stations by parameter, source, or platform.
#. Use the map to zoom to an area of interest, select an individual station, and then download data for that station and sensor.
#. Data can be downloaded by clicking on the station point in the map. In the data display window that opens, select ``Download`` in the bottom left beneath the chart.

How to ERDDAP Sensor Catalog
============================

ERDDAP is a NOAA-sponsored common data server that provides access to gridded and device (e.g., weather sensor) data. The portal hosts an ERDDAP server that provides access to gridded data in a multitude of formats including CSV, TSV, htmlTable, json, .mat, and more.

#. Go to the ERDDAP sensor catalog's website: http://erddap.sensors.ioos.us/erddap/
#. Search for a station name (e.g., "Wiseman").
#. Select the data link under Table DAP.
#. Select the range in each dimension (e.g., start time, stride, end time) and what variables you want to download.
#. Select the output file type desired and submit the request to the server. When the data are bundled, they will download automatically.

.. _project-data-overview:

How to Download Project Data
============================

The `Research Workspace <https://researchworkspace.com/intro/>`_ is a gateway to make project-based research data available publicly through the portal. To search for project data in the catalog:

#. Click on ``Advanced search options`` in the left sidebar and filter to ``Project Data``.
#. Click on the title of interest in the catalog.
#. Choose the ``Project Data`` tab.
#. Browse through the individual data files that are displayed. By default, data files are organized by the folder directory from the Research Workspace.
#. Click the name of the data file of interest to download it to your computer.
#. Click on the ``Metadata`` icon to the right of the resource title to view the associated metadata.

For more information about publishing data to the portal from the Research Workspace read `here <https://workspace.aoos.org/help/PublishingData.html>`_.

*This feature is under development. Check back soon for updates.*

###########
MAP HOW-TOS
###########

How-to glider data
==================

	Glider data can be visualized by accessing it from a data catalog. Here's an example of how to visualize glider data from the Central and Northern California Ocean Observing System (CeNCOOS) data portal:

	#. Go to the CeNCOOS `data portal <http://dev.axiomdatascience.com/?portal_id=20#search?tagId=Gliders>`_.
	#. Filter the catalog by selecting ``Gliders`` tag from the list on the left.
	#. This will display a list of glider datasets collected off the coast of California.

	To visualize the dataset, click on its name. In our CeNCOOS example, to visualize the first dataset on the list, follow these steps:

	#. Click on `UCSC260-20150520T0000 <http://dev.axiomdatascience.com/?portal_id=20#search?tagId=Gliders>`_.
	#. Wait for the dataset to load.

	Once the dataset has loaded, you should see the view in the image below:

	|glider_data_viz|

	From here there are several ways to explore the glider dataset:

	#. overlaid on imagery on the upper-left,
	#. described by basic metadata on the lower-left,
	#. displayed in a 2-dimensional plot on the upper-right, and
	#. plotted in a 3-dimensional plot on the lower-right.

	Additionally, the dataset can be downloaded in several different formats by using the blue downloads button in the top right |glider_data_download_icon|.


How to Add More Data Layers to the Map
======================================

There are multiple ways of adding data layers to the map.

From the Data Catalog
---------------------

1. From the `data catalog <http://help.axds.co/portals/DataCatalog.html>`_, browse or search for the layers you want to add.
2. On the results page, use the ``+`` icon next to any of the thumbnails, an indicator showing how many layers are currently queued will show up in the black, upper menu.
3. You can add multiple layers, it's just like a data "shopping cart".
4. Remove layers by selecting the layer indicator in the black, upper menu, and using the ``X`` icons.
5. After you are finished adding data layers, click ``Map`` in the upper toolbar to view those layers in the map.

From the Data Map
-----------------

1. From within the interactive map, use the ``Search for data`` bar.
2. From the results popup, use the ``+`` icon next to the layer you want to add to the map.

Or, follow `these steps <http://help.axds.co/portals/DataCatalog.html#search-catalog>`_ for how to add data layers directly from the catalog.


How to Learn More About Data Layers
===================================

Within in the map, there are several ways to learn more about the data layer being displayed.

#. In the map legend to the right, you may see the ``i`` icon next to the data layer title. Click on it to view the metadata page.
#. Click on a point in the map. A data display window will appear showing a chart of the data. In the bottom right of the chart click on ``Source``. You will be directed to the data provider's webpage, if available.
#. For real-time sensor data, click on the station in the map. A data display window will appear showing a chart of the data. Here you have two options:

	* **Station and Source Pages:** In the bottom left of the chart you can click on ``Station``. Summary information about the station will be shown, including the instrument location, temporal coverage, platform type, station URN or WMO ID, and the source information for the data provider. Interactive data charts for each of the sensors associated with that station will be shown on the right hand side. You can interact with these similar to other `data charts <http://help.axds.co/portals/DataMap.html#data-charts>`_. Under Sources, you can click on the name of the data provider to discover a list and links to all stations available in the map from that provider.

	* **Sensor page:** In the bottom left of the chart you can also click on ``Sensor``. Summary information about the sensor will be shown, including parameter information, temporal coverage, and the sensor and parameter source URNs. Under parameter information, you can click the ``Download`` button to download the sensor data. You can also interact with the summary data chart for that sensor.

link to .. _customize-data-in-the-map-overview:

How to Filter Data
===================

In the map, your selected layers will appear in a legend on the right. The filters in the legend can be used to change the parameters on the map. You can select among the measurements that are available using the caret, or by toggling on/off the checkboxes. The exact filters or measurements available vary by the data layer being shown.

Toggle Layers On/Off
--------------------

Individual data layers can be toggled on and off using the``Eyeball`` icon to the right of the data layer name. To delete the data layer from the map, select the ``X`` icon.

Change Layer Order
------------------

The order in which data layers appear in the map can be changed. By default, the data layer that appears at the top of the map legend will be displayed forward in the map. To move data layers backward in the map, select the ``Up/Down Arrow`` to the left of the data layer name.

Customize Color and Scale
-------------------------

The data layer legend on the right hand side shows the color scale that is used to represent the unit of measurement. You can change the palette and scale settings by clicking on the color bar. Select among the different color palettes using the drop down menu. The legend scale can be changed by either adjusting the scale slider, or by clicking on the gear icon and entering or advancing the bounds control interval. When the map is zoomed in, the scale and color for that area can be automatically set for the data in view by clicking the ``Autoset for data view`` button.

.. Customize Map View
.. """"""""""""""""""""""""""

How to Save and Share Map
=========================

The custom map you have created can be shared with others. To share, in the upper toolbar click ``Share``. You will receive a custom URL to your saved map state. Copy the link to share with others.

Hoiw to Historical patterns in station observations
===================================================

1. From the real-time sensor map or historical sensor map, click on any station that has more than three years of data.
2. The default graph will show binned data, with the dark gray line indicating the mean and the gray envelope representing the min and max values within the current year.


How to historical patterns in gridded data
===========================================

1. Clicking on any gridded dataset will open a `virtual sensor <http://help.axds.co/portals/DataCatalog.html#download-a-time-series-from-gridded-data>`_.
2. If the dataset has more than three years of data, the default graph will show binned data.
3. The dark gray line indicating the mean and the gray envelope representing the min and max values within the current year.

How to Create a New View
========================

While the premade data views are interesting, the real fun starts when you begin making and sharing your own views. To do so, follow these steps and consult the GIF below:

#. If you're not in the map view, click on the map button |portal_button_icon| to get there.
#. Zoom and pan to your desired map view.
#. Click on the point that represents the data you're interested in.
#. Its data will show up in the data display window in the bottom left corner of the window.
#. Within the data display window, click on the |data_display_view_icon|.
#. To add the data to an existing view, choose it from the dropdown menu. Or, to create a new view, click on the add icon |add_view_icon|.

In the GIF below, we've zoomed in on Hawai'i and selected a sensor to view. We then added that sensor's data to a new view called "My view."

|add_new_view_gif|

How to Customize a View
=======================

There are several ways you can customize your view. These are described below.

How to Describe Your View
=========================

You can add a custon description to your view, which will appear directly underneath your view's title. Your description can include valid HTML, which allows you to include links and images, as well as some basic text formatting. To add a description, follow these steps:

#. Click on the gear icon |gear_icon| near the top right corner of the window.
#. In the popup window that appears, enter your description in the ``Description`` box.

.. tip::
	To inlcude a link in your description, format it like this: ``<a href="http://www.example.com">This text will show up</a>``

.. note::
	You can also edit the title of your view in the same popup window.

How to Display Your Data
========================

You can adjust the way  data are displayed in the chart on the right-hand side of the window, including but not limited to the following:

#. Scale the Y-axis (data values)
#. Scale the X-axis (time)
#. Re-bin the data
#. Display min/max values and/or mean values

Additionally, you can explore the selected data more in depth in the following ways:

.. add links here eventually..

#. Download the data
#. View the station or sensor information page
#. View information about the data source from the data provider or organization that maintains it

How to Add Data to a Comparison Chart
=====================================

Comparison charts appear below the map and allow you to plot similar data from different sources. To add data from a saved chart to a comparison chart, follow these steps:

#. Click the |data_display_view_icon|.
#. Click the ``Add to compare chart`` box under your view's name.

The new data will appear in the comparison chart in a contrasting color, and the name of the data layer will also be added to a list below the comparison chart.

.. note::
	Comparison charts have the same options for displaying data as saved charts, which are described above under **Displaying Your Data**.

How to Share a View
===================

Once you've created, customized, and explored your data view, you'll probably want to share it with your friends and colleagues. To get a shareable link, follow these steps:

#. Click on the share button |share_button_icon| near the top right corner of the blue toolbar.
#. Highlight the link that appears in the popup window.
#. Copy that link and paste it anywhere you'd like to share it.

.. note::
	Anyone you share a view with will essentially see their own version of the view you have created and customized. Their edits and additions will not affect your saved view.

How to Save a View
==================

Once you've created a view it will save automatically to your local Data Views cache. To access the views you have created,  you can access it the same way you'd access a premade view described above.


#. Click on the views button |views_button_icon|
#. Select the view you'd like to access from the dropdown menu. The menu will display both the default views for the portal, in addition to the custom ones you have created.

.. How to Delete a View..
.. ====================..

.. include info here on how to clear the cache ..


